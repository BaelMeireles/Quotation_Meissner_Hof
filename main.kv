WindowManager:
    LoginScreen:
    SearchScreen:
    ResultScreen:
    SendScreen:
    HistoryScreen:

<MessageCard>
    height: content.height

    MDCardSwipeLayerBox:
        padding: "8dp"

        MDIconButton:
            icon: "plus-circle"
            pos_hint: {"center_y": .5}
            on_release: app.add_message(root)

        MDIconButton:
            icon: "trash-can"
            pos_hint: {"center_y": .5}
            on_release: app.remove_message(root)

    MDCardSwipeFrontBox:

        MDLabel:
            id: root.id
            text: root.text
            halign = "left"
            pos_hint: {"center_x": .5, "center_y": .5}

<AdminLoginDialog>
    orientation: "vertical"
    spacing: 40
    adaptive_height: True

    MDLabel:
        text: "Permissão de Acesso"
        bold: True
        halign: "center"
        font_size: 18

    MDLabel:
        text: "Entre como ADMINISTRADOR"
        halign: "center"
        font_size: 14

    MDTextFieldRect:
        id: admin_check_password
        password: True
        multiline: False
        halign: "center"
        hint_text: "Senha"
        size_hint: 1, None
        height: "30dp"
        pos_hint: {"center_x": .5, "center_y": .9}
        on_focus: app.hide_alert()
        on_text_validate: app.on_input_validate("admin_check_password")

    MDLabel:
        id: dialog_admin_check_alert
        text:""
        font_size: 14
        bold: True
        halign : "center"
        pos_hint: {"center_x": .5}

<UserRegisterDialog>
    orientation: "vertical"
    spacing: 20
    adaptive_height: True

    MDLabel:
        text: "Novo Usuário"
        bold: True
        halign: "center"
        font_size: 18

    MDGridLayout:
        cols: 2
        spacing: 20
        adaptive_height: True

        MDTextFieldRect:
            id: new_user_number_field
            multiline: False
            halign: "center"
            input_filter: "int"
            hint_text: "Nº"
            size_hint: .2, None
            height: "30dp"
            on_focus: app.hide_alert()
            on_text_validate: app.on_input_validate("new_user_number_field")

        MDTextFieldRect:
            id: new_user_name_field
            multiline: False
            halign: "center"
            hint_text: "Nome"
            size_hint: .8, None
            height: "30dp"
            on_focus: app.hide_alert()
            on_text_validate: app.on_input_validate("new_user_name_field")

    MDTextFieldRect:
        id: new_user_password_field
        password: True
        multiline: False
        halign: "center"
        hint_text: "Senha"
        size_hint: 1, None
        height: "30dp"
        pos_hint: {"center_x": .5, "center_y": .9}
        on_focus: app.hide_alert()
        on_text_validate: app.on_input_validate("new_user_password_field")

    MDLabel:
        id: dialog_new_user_alert
        text:""
        font_size: 14
        bold: True
        halign : "center"
        pos_hint: {"center_x": .5}

<HalfboardCalculateDialog>
    orientation: "vertical"
    spacing: 40
    size_hint: 1, None
    height: 50

    MDLabel:
        text: "Meia Pensão não encontrada. Calcular automaticamente?"
        halign: "center"
        font_size: 14

<HalfboardCalculateDialog2>
    orientation: "vertical"
    spacing: 40
    size_hint: 1, None
    height: 50

    MDLabel:
        text: "Adicionar aviso de 'Meia Pensão Indisponível'?"
        halign: "center"
        font_size: 14

<LoginScreen>
    name:"login"

    MDTopAppBar:
        title: "Entrar"
        pos_hint:{"center_y": .97}
        elevation: 0
        size_hint: (1, .09)
        left_action_items: [["menu", lambda x: app.call_history()]]

    Image:
        source: "images/logo.png"
        size_hint: (.5, .5)
        pos_hint: {"center_x": .5, "center_y": .78}

    MDLabel:
        text: "Cotações Meissner Hof"
        bold: True
        halign: "center"
        pos_hint: {"center_x": .5, "center_y": .66}

    MDCard:
        orientation: "vertical"
        size_hint: (None, None)
        size: 250, 280
        pos_hint: {"center_x": .5, "center_y": .4}
        padding: 25
        spacing:25
        elevation:3

        MDGridLayout:
            cols: 2
            spacing: 20
            adaptive_height: True

            MDTextFieldRect:
                id: user_number_field
                multiline: False
                halign: "center"
                input_filter: "int"
                hint_text: "Nº"
                size_hint: .2, None
                height: "30dp"
                on_text: app.user_on_type()
                on_focus: app.hide_alert()
                on_text_validate: app.on_input_validate("user_number_field")

            MDTextFieldRect:
                id: user_name_field
                disabled: True
                multiline: False
                halign: "center"
                hint_text: "Nome"
                size_hint: .8, None
                height: "30dp"

        MDBoxLayout:
            spacing: 20
            orientation: "vertical"

            MDTextFieldRect:
                id: user_password_field
                password: True
                multiline: False
                halign: "center"
                hint_text: "Senha"
                size_hint: 1, None
                height: "30dp"
                pos_hint: {"center_x": .5, "center_y": .9}
                on_focus: app.hide_alert()
                on_text_validate: app.on_input_validate("user_password_field")

            MDRaisedButton:
                id: login_button
                text: "Entrar"
                text_color: 1,1,1,1
                size_hint: 1, 1
                pos_hint: {"center_x": .5}
                on_release: app.login()

            MDTextButton:
                id: register_user_button
                text: "Cadastrar Usuário"
                color: app.theme_cls.primary_color
                pos_hint: {"center_x": .5}
                on_release:
                    app.hide_alert()
                    app.register()

            MDLabel:
                id: login_alert
                text: ""
                bold: True
                halign: "center"
                pos_hint: {"center_x": .5}

    MDBoxLayout:
        padding: 10

        MDLabel:
            text: "ATENÇÃO! Não use este aplicativo sem receber instruções. O desenvolvedor não se responsabiliza por nenhuma adversidade causada por mal uso alheio.\n\nGabriel Meireles"
            font_size: 11
            halign : "center"
            pos_hint: {"center_x": .5, "center_y": .07}

<SearchScreen>:
    name: "search"

    MDTopAppBar:
        title: "Definir Busca"
        pos_hint:{"center_y": .97}
        size_hint: (1, .09)
        elevation: 0
        left_action_items: [["arrow-left", lambda x: app.call_login()]]

    MDBoxLayout:
        orientation: "vertical"
        adaptive_height: True
        spacing: 20
        padding: 20

        MDBoxLayout:
            id: search_layout
            orientation: "vertical"
            adaptive_height: True
            spacing: 20

            MDRaisedButton:
                id: period_button
                font_size: 18
                text_color: 1,1,1,1
                text: "[b]Período[/b]"
                size_hint: 1, 1
                pos_hint: {"center_x": .5}
                on_release:
                    app.hide_alert()
                    if app.can_search: app.show_date_picker()

            MDRectangleFlatButton:
                id: adults_menu
                text: "[b]Adultos[/b]"
                font_size: 18
                line_width: 2
                text_color: app.theme_cls.accent_color
                size_hint: 1, 1
                pos_hint: {"center_x": .5}
                on_release:
                    app.hide_alert()
                    if app.can_search: app.adults_menu.open()

            MDGridLayout:
                cols: 2
                adaptive_height: True
                spacing: 5

                MDRectangleFlatButton:
                    id: children_menu
                    text: "[b]Crianças:[/b]"
                    font_size: 16
                    line_width: 2
                    text_color: app.theme_cls.accent_color
                    size_hint: 1, 1
                    pos_hint: {"center_x": .5}
                    on_release:
                        app.hide_alert()
                        if app.can_search: app.children_menu.open()

                MDRectangleFlatButton:
                    id: child1_menu
                    disabled: True
                    text: "[b]-[/b]"
                    font_size: 16
                    line_width: 2
                    text_color: app.theme_cls.accent_color
                    size_hint: 1, 1
                    pos_hint: {"center_x": .5}
                    on_release:
                        app.hide_alert()
                        if app.can_search: app.child1_menu.open()

                MDRectangleFlatButton:
                    id: child2_menu
                    disabled: True
                    text: "[b]-[/b]"
                    font_size: 16
                    line_width: 2
                    text_color: app.theme_cls.accent_color
                    size_hint: 1, 1
                    pos_hint: {"center_x": .5}
                    on_release:
                        app.hide_alert()
                        if app.can_search: app.child2_menu.open()

                MDRectangleFlatButton:
                    id: child3_menu
                    disabled: True
                    text: "[b]-[/b]"
                    font_size: 16
                    line_width: 2
                    text_color: app.theme_cls.accent_color
                    size_hint: 1, 1
                    pos_hint: {"center_x": .5}
                    on_release:
                        app.hide_alert()
                        if app.can_search: app.child3_menu.open()

            MDTextFieldRect:
                id: promo_field
                multiline: False
                halign: "center"
                hint_text: "Promoção (opcional)"
                size_hint: 1, None
                height: "30dp"
                pos_hint: {"center_x": .5}
                on_focus: app.hide_alert()

        MDLabel:
            id: search_alert
            text:""
            bold: True
            halign : "center"
            pos_hint: {"center_x": .5}

        MDRaisedButton:
            id: search_button
            text: "Pesquisar"
            text_color: 1,1,1,1
            size_hint: .5, 1
            pos_hint: {"center_x": .5}
            on_release: app.pre_gather_info()

<ResultScreen>
    name: "result"

    MDTopAppBar:
        title: "Acomodações"
        pos_hint:{"center_y": .97}
        size_hint: (1, .09)
        elevation: 0
        left_action_items: [["arrow-left", lambda x: app.call_search()]]

    MDBoxLayout:
        orientation: "vertical"
        adaptive_height: True
        spacing: 20
        padding: 20

        MDBoxLayout:
            id: result_layout
            orientation: "vertical"
            adaptive_height: True
            spacing: 20

        MDLabel:
            id: result_alert
            text:""
            bold: True
            halign : "center"
            pos_hint: {"center_x": .5}

        MDRaisedButton:
            id: confirm_button
            text: "Confirmar"
            text_color: 1,1,1,1
            size_hint: .5, 1
            pos_hint: {"center_x": .5}
            on_release: app.call_send()
<SendScreen>:
    name:"send"

    MDTopAppBar:
        title: "Mensagens"
        pos_hint:{"center_y": .97}
        size_hint: (1, .09)
        elevation: 0
        left_action_items: [["arrow-left", lambda x: app.call_result()]]

    MDBoxLayout:
        orientation: "vertical"
        adaptive_height: True
        spacing: 20
        padding: 20

        MDBoxLayout:
            id: send_layout
            orientation: "vertical"
            adaptive_height: True
            spacing: 20

        MDLabel:
            id: send_alert
            text:""
            bold: True
            halign : "center"
            pos_hint: {"center_x": .5}

        MDRaisedButton:
            id: send_button
            text: "Enviar"
            text_color: 1,1,1,1
            size_hint: .5, 1
            pos_hint: {"center_x": .5}
            on_release: app.call_search()

<HistoryScreen>:
    name:"history"

    MDTopAppBar:
        title: "Histórico"
        pos_hint:{"center_y": .97}
        size_hint: (1, .09)
        elevation: 0
        right_action_items: [["arrow-right", lambda x: app.call_login()]]

    MDBoxLayout:
        orientation: "vertical"
        adaptive_height: True
        spacing: 20
        padding: 20

        MDBoxLayout:
            id: history_layout
            orientation: "vertical"
            adaptive_height: True
            spacing: 20

        MDLabel:
            id: history_alert
            text:""
            bold: True
            halign : "center"
            pos_hint: {"center_x": .5}

        MDRaisedButton:
            id: print_button
            text: "Imprimir"
            text_color: 1,1,1,1
            size_hint: .5, 1
            pos_hint: {"center_x": .5}
            on_release: app.call_print()